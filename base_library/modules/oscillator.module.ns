[SAMPLES_PER_CHANNEL][2]FLOAT audio;

// TODO: Add language features so that this doesn't have to always be stereo.
static phase {
    [2]FLOAT phase = 0.0;
}

for i = 0 to SAMPLES_PER_CHANNEL no_unroll {
    audio[i] = Sin((phase + 2.0 + phase_offset[i?]) % 1.0 * 6.28) * amplitude;
    phase = (phase + pitch / 44100.0) % 1.0;
}
