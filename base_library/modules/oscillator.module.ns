[SAMPLES_PER_CHANNEL][2]FLOAT audio;

static phase_now {
    FLOAT phase_now = 0.0;
}

for i = 0 to SAMPLES_PER_CHANNEL no_unroll {
    audio[i][0] = Sin(phase_now * 6.28) * amplitude;
    audio[i][1] = audio[i][0];
    phase_now = phase_now + pitch / 44100.0;
    if phase_now > 1.0 {
        phase_now = phase_now - 1.0;
    }
}
