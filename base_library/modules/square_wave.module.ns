macro Wave(buffer_pos, phase):(value) {
    // TODO: Language features so that this can be stereo.
    FLOAT value;
    if phase[0?] < duty[buffer_pos?][0?] {
        value = 1.0;
    } else {
        value = -1.0;
    }
}